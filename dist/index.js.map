{"version":3,"file":"index.js","sources":["../src/components/TextWriter.vue","../src/components/CodeWriter.vue","../src/VueWriterPlugin.ts"],"sourcesContent":["<template>\n    <div ref=\"root\" class=\"text-snippet\">\n        <div class=\"to-be-written\">\n            <div id=\"to-write\"></div>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport { onMounted, ref } from \"vue\";\nimport { Writer } from \"@human-writes/core\";\n\nconst root = ref(null);\n\nconst props = defineProps({\n    source: {\n        default: \"\"\n    },\n    speed: {\n        default: \"60\"\n    },\n    dependsOnSelector: {\n        default: \"\"\n    },\n    makeTypos: {\n        default: false\n    },\n    styles: {\n        default: \"\"\n    },\n    classes: {\n        default: \"\"\n    },\n    finished: {\n        default: false\n    },\n    restart: {\n        default: false\n    }\n});\n\nonMounted(async () => {\n    const $doc = root.value.ownerDocument;\n\n    /**\n     * The magic starts here\n     */\n    if (props.styles !== \"\" && props.classes !== \"\") {\n        const $styleList = props.styles.split(\",\");\n\n        $styleList.forEach(($item) => {\n            const style = $doc.createElement(\"style\");\n            style.innerHTML = `@import \"${$item}\"`;\n\n            $doc.head.appendChild(style);\n        });\n\n        const parentDiv = $doc.getElementById(\"to-write\");\n        parentDiv.setAttribute(\"class\", props.classes);\n    }\n\n    if (props.dependsOnSelector !== \"\") {\n        const component = $doc.querySelector(props.dependsOnSelector);\n        if (component !== null) {\n            // Options for the observer (which mutations to observe)\n            const config = { attributes: true };\n\n            // Callback function to execute when mutations are observed\n            // Create an observer instance linked to the callback function\n            const observer = new MutationObserver(\n                async (mutationList, observer) => {\n                    for (const mutation of mutationList) {\n                        if (\n                            mutation.type === \"attributes\" &&\n                            mutation.attributeName === \"finished\"\n                        ) {\n                            const attr = component.getAttribute(\"finished\");\n                            if (attr === \"true\") {\n                                observer.disconnect();\n                                await writeLikeAHuman();\n                            }\n                        }\n                    }\n                }\n            );\n\n            // Start observing the target node for configured mutations\n            observer.observe(component, config);\n        }\n    } else {\n        await writeLikeAHuman();\n    }\n});\n\nconst onFinishedWriting = function (html) {\n    // Raise an event outside the shadow DOM\n    // when all is done and ready\n    const finishedEvent = new CustomEvent(\"finishedWriting\", {\n        bubbles: true,\n        cancellable: true,\n        detail: {\n            content: html\n        }\n    });\n    root.value.dispatchEvent(finishedEvent);\n    root.value.setAttribute(\"finished\", \"true\");\n};\n\nconst writeLikeAHuman = async () => {\n    const doc = root.value.ownerDocument;\n\n    const tw = new Writer(\n        doc,\n        props.source,\n        props.speed,\n        props.makeTypos,\n        onFinishedWriting\n    );\n    await tw.writeLikeAHuman(\"to-write\");\n};\n</script>\n\n<script>\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n    name: \"TextWriter\"\n});\n</script>\n// watches\n<!-- static get observeAttributes() {\n//         /**\n//          * Attributes passed inline to the component\n//          */\n//         return [\n//             \"source\",\n//             \"speed\",\n//             \"depends-on-selector\",\n//             \"make-mistakes\",\n//             \"styles\",\n//             \"classes\",\n//             \"finished\"\n//         ];\n//     } -->\n","<template>\n    <div ref=\"root\" class=\"code-snippet\">\n        <div class=\"to-be-copied\">\n            <pre id=\"to-copy\"><code></code></pre>\n        </div>\n        <div class=\"to-be-written\">\n            <pre id=\"to-write\"><code></code></pre>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport { onMounted, ref } from \"vue\";\nimport { Writer } from \"@human-writes/core\";\n\nconst root = ref(null);\n\nconst props = defineProps({\n    source: {\n        default: \"\"\n    },\n    speed: {\n        default: \"60\"\n    },\n    dependsOnSelector: {\n        default: \"\"\n    },\n    makeTypos: {\n        default: false\n    },\n    styles: {\n        default: \"\"\n    },\n    classes: {\n        default: \"\"\n    },\n    finished: {\n        default: false\n    },\n    restart: {\n        default: false\n    },\n    useHighlightJs: {\n        default: false\n    },\n    theme: {\n        default: \"base16/monokai\"\n    },\n    language: {\n        default: \"html\"\n    }\n});\n\nonMounted(async () => {\n    const doc = root.value.ownerDocument;\n    if (props.useHighlightJs) {\n        const $theme = props.theme ?? \"base16/monokai\";\n        const $language = props.language ?? \"html\";\n\n        const script = doc.createElement(\"script\");\n        script.src =\n            \"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js\";\n        doc.head.appendChild(script);\n\n        const $styleList = [];\n        $styleList.push(\n            \"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css\"\n        );\n        $styleList.push(\n            `https://highlightjs.org/static/demo/styles/${$theme}.css`\n        );\n\n        $styleList.forEach(($item) => {\n            const style = doc.createElement(\"style\");\n            style.innerHTML = `@import \"${$item}\"`;\n\n            doc.head.appendChild(style);\n        });\n\n        const $parentDiv = doc.querySelectorAll(\"code\");\n        for (const node of $parentDiv) {\n            node.setAttribute(\"class\", `language-${$language}`);\n        }\n    }\n    /**\n     * The magic starts here\n     */\n    if (props.styles !== \"\" && props.classes !== \"\") {\n        const $styleList = props.styles.split(\",\");\n\n        $styleList.forEach(($item) => {\n            const style = doc.createElement(\"style\");\n            style.innerHTML = `@import \"${$item}\"`;\n\n            doc.head.appendChild(style);\n        });\n\n        const parentDiv = doc.getElementById(\"to-write\");\n        parentDiv.setAttribute(\"class\", props.classes);\n    }\n\n    if (props.dependsOnSelector !== \"\") {\n        const component = doc.querySelector(props.dependsOnSelector);\n        if (component !== null) {\n            // Options for the observer (which mutations to observe)\n            const config = { attributes: true };\n\n            // Callback function to execute when mutations are observed\n            // Create an observer instance linked to the callback function\n            const observer = new MutationObserver(\n                async (mutationList, observer) => {\n                    for (const mutation of mutationList) {\n                        if (\n                            mutation.type === \"attributes\" &&\n                            mutation.attributeName === \"finished\"\n                        ) {\n                            const attr = component.getAttribute(\"finished\");\n\n                            if (attr === \"true\") {\n                                observer.disconnect();\n                                await writeLikeAHuman();\n                            }\n                        }\n                    }\n                }\n            );\n\n            // Start observing the target node for configured mutations\n            observer.observe(component, config);\n        }\n    } else {\n        await writeLikeAHuman();\n    }\n});\n\nconst onFinishedWriting = function (html) {\n    // Raise an event outside the shadow DOM\n    // when all is done and ready\n    const finishedEvent = new CustomEvent(\"finishedWriting\", {\n        bubbles: true,\n        cancellable: true,\n        detail: {\n            content: html\n        }\n    });\n    root.value.dispatchEvent(finishedEvent);\n    root.value.setAttribute(\"finished\", \"true\");\n};\n\nconst writeLikeAHuman = async () => {\n    const doc = root.value.ownerDocument;\n\n    const tw = new Writer(doc, props.source, props.speed, props.makeTypos, onFinishedWriting);\n    await tw.writeLikeAHuman(\"to-write\", \"to-copy\");\n};\n</script>\n<script>\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n    name: \"CodeWriter\"\n});\n</script>\n// watches\n<!-- static get observeAttributes() {\n//         /**\n//          * Attributes passed inline to the component\n//          */\n//         return [\n//             \"source\",\n//             \"speed\",\n//             \"depends-on-selector\",\n//             \"make-mistakes\",\n//             \"styles\",\n//             \"classes\",\n//             \"finished\"\n//         ];\n//     } -->\n","import { App, Plugin } from \"vue\";\nimport TextWriter from \"./components/TextWriter.vue\";\nimport CodeWriter from \"./components/CodeWriter.vue\";\nimport { VueWriter } from \"./types\";\nimport { VueWriterOptions } from \"./types\";\n\n// Used to create a new ColoredText. \"options\" will be whatever you add later to \"app.use(VueWriterPlugin, options);\"\nconst createVueWriter = (options: VueWriterOptions): VueWriter => {\n    return {\n        textSpeed: options.speed,\n        textTypos: options.makeTypos\n    };\n};\n\n// The Install function used by Vue to register the plugin\nexport const VueWriterPlugin: Plugin = {\n    install(app: App, options: VueWriterOptions) {\n        // makes ColoredText available in your Vue.js app as either \"$this.coloredText\" (in your Source) or \"{{ $coloredText }}\" in your templates\n        app.config.globalProperties.$writerOptions = createVueWriter(options);\n        // register Headline as a global component, so you can use it wherever you want in your app\n        app.component(\"TextWriter\", TextWriter);\n        app.component(\"CodeWriter\", CodeWriter);\n    }\n};\n"],"names":["__default__","TextWriter","CodeWriter"],"mappings":"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"}